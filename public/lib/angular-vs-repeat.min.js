!function(a,b){"use strict";var c=-1!=navigator.appVersion.indexOf("Mac"),d="undefined"!=typeof a.onwheel?"wheel":"undefined"!=typeof a.onmousewheel?"mousewheel":"DOMMouseScroll",e=document.documentElement,f=e.matches?"matches":e.matchesSelector?"matchesSelector":e.webkitMatches?"webkitMatches":e.webkitMatchesSelector?"webkitMatchesSelector":e.msMatches?"msMatches":e.msMatchesSelector?"msMatchesSelector":e.mozMatches?"mozMatches":e.mozMatchesSelector?"mozMatchesSelector":null,g=b.element.prototype.closest||function(a){for(var c=this[0].parentNode;c!==document.documentElement&&null!=c&&!c[f](a);)c=c.parentNode;return c&&c[f](a)?b.element(c):b.element()};b.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(e){return{restrict:"A",scope:!0,require:"?^vsRepeat",controller:["$scope",function(a){this.$scrollParent=a.$scrollParent,this.$fillElement=a.$fillElement}],compile:function(f){var h=f.children().eq(0),i=h.attr("ng-repeat"),j=h[0].outerHTML,k=/^\s*(\S+)\s+in\s+(\S+)\s*(track\s+by\s+\S+)?/.exec(i),l=k[1],m=k[2],n=k[3],o="$vs_collection",p={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsExcess:"excess"};return f.empty(),a.getComputedStyle&&"absolute"===a.getComputedStyle(f[0]).position||f.css("position","relative"),{pre:function(f,h,i,k){function q(){D&&f.$$postDigest(function(){if(h[0].offsetHeight||h[0].offsetWidth)for(var a=h.children(),b=0;b<a.length;){if(null!=a[b].attributes["ng-repeat"]){a[b][I]&&(f.elementSize=a[b][I],t(),D=!1,f.$root&&!f.$root.$$phase&&f.$apply());break}b++}else var c=f.$watch(function(){(h[0].offsetHeight||h[0].offsetWidth)&&(c(),q())})})}function r(a){var b=a.currentTarget;(b.scrollWidth>b.clientWidth||b.scrollHeight>b.clientHeight)&&y.css("display","block")}function s(){w()&&f.$apply()}function t(){L=void 0,M=void 0,w(),u(f.elementSize*x),f.$emit("vsRepeatReinitialized")}function u(a){if(C){if(z.css({width:f.offsetBefore+a+f.offsetAfter+"px",height:"100%"}),k&&k.$fillElement){var b=k.$fillElement[0].parentNode.querySelector("[ng-repeat]");b&&k.$fillElement.css({width:b.scrollWidth+"px"})}}else z.css({height:f.offsetBefore+a+f.offsetAfter+"px",width:"100%"}),k&&k.$fillElement&&(b=k.$fillElement[0].parentNode.querySelector("[ng-repeat]"),b&&k.$fillElement.css({height:b.scrollHeight+"px"}))}function v(){var a=E[0][H];a!==N&&(t(),f.$root&&!f.$root.$$phase&&f.$apply()),N=a}function w(){f.startIndex=Math.max(Math.floor(E[0][J]/f.elementSize+f.excess/2)-f.excess,0),f.endIndex=Math.min(f.startIndex+Math.ceil(E[0][H]/f.elementSize)+f.excess,x);var a=f.startIndex!==L||f.endIndex!==M;return a&&(f[o]=B.slice(f.startIndex,f.endIndex)),L=f.startIndex,M=f.endIndex,a}var x,y,z,A=b.element(j),B=[],C="undefined"!=typeof i.vsHorizontal,D=!i.vsRepeat,E=i.vsScrollParent?g.call(h,i.vsScrollParent):h,F=C?"translateX":"translateY",G=C?"left":"top",H=C?"clientWidth":"clientHeight",I=C?"offsetWidth":"offsetHeight",J=C?"scrollLeft":"scrollTop";if(0===E.length)throw"Specified scroll parent selector did not match any element";f.$scrollParent=E,f.elementSize=E[0][H]||50,f.offsetBefore=0,f.offsetAfter=0,f.excess=2,Object.keys(p).forEach(function(a){i[a]&&i.$observe(a,function(b){f[p[a]]=+b,t()})}),f.$watchCollection(m,function(a){return B=a||[],!B||B.length<1?(f[o]=[],x=0,void u(0)):(x=B.length,q(),void t())}),A.attr("ng-repeat",l+" in "+o+(n?" "+n:"")).addClass("vs-repeat-repeated-element"),"undefined"!=typeof document.documentElement.style.transform?A.attr("ng-style",'{ "transform": "'+F+'(" + (($index + startIndex) * elementSize + offsetBefore) + "px)"}'):"undefined"!=typeof document.documentElement.style.webkitTransform?A.attr("ng-style",'{ "-webkit-transform": "'+F+'(" + (($index + startIndex) * elementSize + offsetBefore) + "px)"}'):A.attr("ng-style","{"+G+': (($index + startIndex) * elementSize + offsetBefore) + "px"}'),e(A)(f),h.append(A),z=b.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"}),h.append(z),e(z)(f),f.$fillElement=z;var K={};c&&(y=b.element('<div class="vs-repeat-wheel-helper"></div>').on(d,function(a){a.preventDefault(),a.stopPropagation(),a.originalEvent&&(a=a.originalEvent),E[0].scrollLeft+=a.deltaX||-a.wheelDeltaX,E[0].scrollTop+=a.deltaY||-a.wheelDeltaY}).on("mousemove",function(a){(K.x!==a.clientX||K.y!==a.clientY)&&b.element(this).css("display","none"),K={x:a.clientX,y:a.clientY}}).css("display","none"),z.append(y)),f.startIndex=0,f.endIndex=0,E.on("scroll",function(){w()&&f.$apply()}),c&&E.on(d,r),b.element(a).on("resize",s),f.$on("$destroy",function(){b.element(a).off("resize",s)}),f.$on("vsRepeatTrigger",t);var L,M,N;f.$watch(function(){"function"==typeof a.requestAnimationFrame?a.requestAnimationFrame(v):v()})}}}}}]),b.element(document.head).append(["<style>.vs-repeat-wheel-helper{position: absolute;top: 0;bottom: 0;left: 0;right: 0;z-index: 99999;background: rgba(0, 0, 0, 0);}.vs-repeat-repeated-element{position: absolute;z-index: 1;}</style>"].join(""))}(window,window.angular);